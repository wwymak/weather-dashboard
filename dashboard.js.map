{"version":3,"sources":["dashboard.es6.js"],"names":[],"mappings":"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","file":"dashboard.js","sourcesContent":["/**\n * Main file for the charting js\n *\n * idea: main chart to have temp as time series, grouped by day of year\n * possibly to be zoomable into minute detail, with rainfall superimposed as an extra series above\n * -- would be really cool to do something along the lines of http://bl.ocks.org/emeeks/b57f4cc89dacd38fcdcd\n *\n * (showing pattern in rainfall and temp, which most people are interested in\n * rainfall + temp so you can know whetehr it's generally cold and wet/ hot and wet, vice versa etc\n *\n *\n * secondary charts:\n * wind direction distrubution average for the date range selected with brush (radar chart)\n *\n * battery level vs solar flux\n *\n */\n\nlet dateFormatter = d3.time.format('%Y/%m/%d %H:%M');\nlet xFilter; //crossfilter\nlet dayDimension, weekDimension, solarFluxDimension, windDirDimension; //dimensions- basically what you want as x values\nlet dayTempGroup, rainFallGroup, windDirGroup; //xfilter groups\n\nlet tempChart, batteryChart, rainfallChart, windChart; // types of charts\nlet transitionDuration = 500; //default transition times for chart zooming etc\n\n/**\n * initialises the dashboard elements that dc draws, setting the height and width\n * dynamically so on window resize the chart redraws according to new dimensions\n */\nfunction dashboardInit() {\n  let tempChartWidth = document.getElementById('tempChart').offsetWidth,\n      tempChartHeight = tempChartWidth * 0.5,\n      rainFallChartWidth = document.getElementById('rainfallChart').offsetWidth,\n      rainFallChartHeight = rainFallChartWidth * 0.5;\n  tempChart = dc.lineChart('#tempChart')\n      .width(tempChartWidth)\n      //.minWidth(150)\n      .height(tempChartHeight)\n      //.minHeight(150)\n      .transitionDuration(transitionDuration)\n      .margins({top: 30, right: 50, bottom: 25, left: 40});\n  rainfallChart = dc.barChart('#rainfallChart')\n      .width(rainFallChartWidth)\n      .height(rainFallChartHeight)\n      .transitionDuration(10)\n      .margins({top: 30, right: 50, bottom: 25, left: 40});\n  //batteryChart = dc.lineChart('#batteryChart');\n}\n\n/**\n * get the csv data using d3.promise, then do a few bits of parsing\n * @returns {Promise.<T>}\n */\nfunction getData() {\n  return d3.promise.csv('JCMB_2015.csv').then(data => {\n    data.forEach(d => {\n      d.dateTime = dateFormatter.parse(d.dateTime);\n      Object.keys(d).forEach((key) => {\n        if (d.hasOwnProperty(key) && key !== \"dateTime\") {\n          d[key] = +d[key];\n        }\n      });\n      if(d.windDir >= 360) {\n        d.windDir = d.windDir % 360;\n      }\n      d.day = d3.time.day(d.dateTime);\n      d.week = d3.time.week(d.dateTime);\n      d.windDirType = Math.floor(d.windDir / 45);//classify the wind direction into 1 of 8 quadrants\n    });\n    return data\n  }, (err) => {\n    alert(\"problem fetching data, please reload page\");\n  });\n}\n\nfunction setXfilter(data) {\n  xFilter = crossfilter(data);\n  dayDimension = xFilter.dimension(d => d.day);\n  weekDimension = xFilter.dimension(d => d.week);\n  solarFluxDimension = xFilter.dimension(d => d.solarFlux);\n  windDirDimension = xFilter.dimension(d => d.windDirType);\n\n  dayTempGroup = dayDimension.group().reduce((p, v) => {\n    ++p.count;\n    p.totalTemp += v.surfTemp;\n    p.avgTemp = p.totalTemp /p.count;\n    return p\n  }, (p,v) => {\n    --p.count;\n    p.totalTemp -= v.surfTemp;\n    p.avgTemp = p.totalTemp /p.count;\n    return p\n  }, () => {\n    return {\n      count: 0,\n      totalTemp: 0,\n      avgTemp: 0\n    }\n  });\n\n  rainFallGroup = weekDimension.group().reduceSum(d => d.rainfall);\n  windDirGroup = windDirDimension.group().reduceCount();\n}\n\nfunction chartRender(data){\n  let minDate = d3.min(data, d => d.dateTime),\n      maxDate = d3.max(data, d => d.dateTime);\n  tempChart\n      .dimension(dayDimension)\n      .group(dayTempGroup)\n      .brushOn(true)\n      .valueAccessor(d => d.value.avgTemp)\n      .x(d3.time.scale().domain([minDate, maxDate]))\n      .yAxisLabel('degrees Celcius')\n      .renderTitle(true)\n      .title(d => `${d.key}\\n ${d.value}degrees`)\n      .on('filtered', () => {\n        console.log('filtered', rainFallGroup.all(), windDirGroup.reduceCount().all())\n        d3.select('#windDirChart').datum(windDirGroup.reduceCount().all()).call(radarChart());\n      });\n\n  tempChart.brush().on('brushend', () => {console.log('brushend')})\n\n  rainfallChart\n      .dimension(weekDimension)\n      .group(rainFallGroup)\n      .valueAccessor(d => d.value)\n      .yAxisLabel('mm')\n      .brushOn(false)\n      .x(d3.time.scale().domain([minDate, maxDate]))\n      .xUnits(d3.time.weeks)\n      .elasticY(true)\n      .elasticX(true);\n      //.on(\"zoomed\", function(chart, filter){console.log('zoomed')})\n      //.on(\"postRender\", function(chart){console.log('postRender')})\n      //.rangeChart(tempChart);\n\n  windChart = d3.select('#windDirChart').datum(windDirGroup.all())\n      .call(radarChart().width(document.getElementById('windDirChart').offsetWidth)\n          .height(document.getElementById('windDirChart').offsetWidth));\n  dc.renderAll();\n}\n\n//radarChart for windDirection data\nfunction radarChart(){\n  let width = 400,\n      height = 400,\n      margin = 40,\n      angleScale = d3.scale.linear().range([0, 2* Math.PI]),\n      radiusScale = d3.scale.linear().range([0, d3.min([height, width]) /2 - margin]),\n      colorScale = d3.scale.category20(); //temp colors-- don't look super great tbh,\n\n  let stackFunc = d3.layout.stack().values(d => d.values);\n\n  function chart(selection) {\n    let svg;\n    //assuming that data is in the format of array with [{key: .., value:...}, ...]\n    selection.each((data) => {\n      //select the svg if it exists\n      svg = this.selectAll(\"svg.radarchart\").data([data]);\n      console.log(data, svg, d3.max(data, d => d.value))\n      //or add a new one if not\n      let newSVG = svg.enter().append('svg').attr('class', 'radarchart');\n\n      svg.attr(\"width\" , width)\n        .attr(\"height\", height);\n\n      angleScale.domain([0, data.length]);\n      radiusScale.domain([0, d3.max(data, d => d.value)]);\nconsole.log(radiusScale.domain())\n      newSVG.append('g').attr('class', 'radial-bars')\n          .attr('transform', 'translate(' +  width /2 + ',' + height/2 + ')');\n\n      let radialG = d3.selectAll('.radial-bars');\n\n      drawRadialBars(data);\n      drawRadialAxis();\n\n      function drawRadialBars(data) {\n        let arc = d3.svg.arc().startAngle((d, i) => angleScale(i))\n            .endAngle((d, i) => angleScale(i + 1))\n            .innerRadius(0)\n            .outerRadius(d => radiusScale(d.value));\n        let radarSectors = radialG.selectAll('path').data(data)\n\n        radarSectors.enter().append('path');\n\n        radarSectors.attr('d', arc).attr('class', 'radial-sector')\n                .attr('fill', (d, i) => colorScale(i));\n      }\n\n      function drawRadialAxis() {\n        let rAxisVals = d3.range(3).map(function(d){return (d + 1)* radiusScale.domain()[1]/3});\n\n        let radialAxis = radialG.selectAll('circle.raxis').data(rAxisVals);\n        radialAxis.enter().append('circle')\n        radialAxis.attr('r', d =>  radiusScale(d))\n            .attr('cx', 0).attr('cy', 0)\n            .attr('class', 'raxis');\n\n        let radialLabels = radialG.selectAll('text').data(rAxisVals);\n        radialLabels.enter().append('text');\n        radialLabels.attr('x', 0).attr('y', d =>radiusScale(d))\n            .text(d => Math.round(radiusScale(d)))\n      }\n\n    })\n  }\n\n  //getters and setters\n  chart.width = function(val) {\n    if (!arguments.length) {\n      return width;\n    }\n    width = val;\n    return chart;\n  };\n\n  chart.height = function(val) {\n    if (!arguments.length) {\n      return height;\n    }\n    height = val;\n    return chart;\n  };\n\n  chart.margin = function(val) {\n    if (!arguments.length) {\n      return margin;\n    }\n    margin = val;\n    return chart;\n  };\n\n  return chart\n}\n//todo dcjs don't seem to like the resizing very much...\nfunction windowResizeHandler() {\n  //debounce function, basically redraw the chart on resize but only after you've\n  //finished resizing\n  let resizeTimer;\n  window.onresize = ((e) => {\n    clearTimeout(resizeTimer);\n    resizeTimer = setTimeout(() => {\n      //dashboardInit();\n      dc.redrawAll();\n    }, 250);\n  });\n\n}\n\ndashboardInit();\n\ngetData().then(data => {\n  setXfilter(data);\n  return data}, err => {console.log(err)})\n  .then((data) => {chartRender(data)});"]}